function showRoll(e){Swal.fire({title:"<strong>Roll No:."+e+"</strong>",type:"info",html:'You can use <b>bold text</b>, <a href="//sweetalert2.github.io">links</a> and other HTML tags',showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:'<i class="fa fa-thumbs-up"></i> Great!',confirmButtonAriaLabel:"Thumbs up, great!",cancelButtonText:'<i class="fa fa-thumbs-down"></i>',cancelButtonAriaLabel:"Thumbs down"})}(function(e){e("#colorselect").on("change",function(){let t=JSON.parse(this.value),o="",r=0;e.each(t,function(e,t){o+="<option value="+t+">"+e+"</option>",r+=parseInt(t)}),e("#size").append(o),e("#sizer").show(),e("#oqty").html(r),e("#oqtyf").val(r),e("#colorf").val(e("#colorselect>option:selected").text())}),e("#size").on("change",function(){let t=this.value;e("#qtyv").html(t),e("#iqtyf").val(t),e("#sizef").val(e("#size>option:selected").text()),e("#qtyr").show(),e("#formsubmit").show()}),e("#rqty").on("input",function(t){let o='<div class="pt-1"> <div class="alert alert-danger alert-dismissible bg-danger text-white border-0 fade show" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> Possible value exceeded </div></div>',r=parseInt(this.value),n=parseInt(e("#iqtyf").val());r>n||!e.isNumeric(e(this).val())?(e("#errorbox").html(o),e(this).val("")):e("#errorbox").html("")})})(jQuery),function(e){function t(e,t,o){for(var r=!1,n=0;n<e.length;++n){var a=e[n];if(a[t]==o){r=!0;break}}return r}function o(t,o){e("#preloader").delay(350).fadeIn("slow"),e("#status").fadeIn();for(let o in t){var r=e.Deferred();e.ajax({type:"post",url:"/addNewPO",data:{po:t[o]},success:function(n){console.log("Success! "+n),t.length-1==o&&(console.log("Resolving!"),r.resolve(),e("#status").fadeOut(),e("#preloader").delay(350).fadeOut("slow")),0},error:function(e){console.error(e)}})}return r.promise()}e("#AddMatNB").on("change",function(t){var o=e("#AddMatNB").val().split(".").pop().toLowerCase();if(-1==e.inArray(o,["csv"]))return Swal.fire("Import Process Canceled","Proccess canceled due to a detected file error. You may try again!","info"),!1;if(null!=t.target.files){var r=new FileReader;r.onload=function(t){csvResult=e.csv.toObjects(t.target.result),Swal.fire({title:csvResult.length+" Rolls detected, Ready to finish adding?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, add as New Purchase Orders!"}).then(t=>{t.value?(e("#preloader").delay(350).fadeIn("slow"),e("#status").fadeIn(),csvResult.forEach(function(t,o){e.ajax({type:"post",url:"/addNewPO",data:{roll:t},success:function(t){console.log("Success! "+t),po.length-1==index&&(console.log("Resolving!"),dfrd1.resolve(),e("#status").fadeOut(),e("#preloader").delay(350).fadeOut("slow")),count++},error:function(e){console.error(e)}}),console.log(t),csvResult.length-1==o&&(console.log("Resolving!"),e("#status").fadeOut(),e("#preloader").delay(350).fadeOut("slow"))}),Swal.fire("Added Successfully!","This page will be refreshed.","success").then(()=>{window.location.reload()})):window.location.reload()})},r.readAsText(t.target.files.item(0))}}),e("#AddPONB").on("change",function(r){var n={PO:[]},a=e("#AddPONB").val().split(".").pop().toLowerCase();if(-1==e.inArray(a,["csv"]))return Swal.fire("Import Process Canceled","Proccess canceled due to a detected file error. You may try again!","info"),!1;if(null!=r.target.files){var l=new FileReader;l.onload=function(r){csvResult=e.csv.toObjects(r.target.result),csvResult.forEach(function(o,r){var a=o.CustomerPONumber,l=o.color,s=o.size,i=Math.round(o.CutQty).toString(),u=parseInt(o.Qty);if(0!=n.PO.length){for(let r in n.PO)if(n.PO[r].PONO===a)if(n.PO[r].Color.hasOwnProperty(o.color))n.PO[r].Color[l][s]=i,n.PO[r].Qty=parseInt(n.PO[r].Qty)+u;else{let t=JSON.parse('{"'+l+'": {"'+s+'":"'+i+'"}}');e.extend(n.PO[r].Color,t),n.PO[r].Qty=parseInt(n.PO[r].Qty)+u}else if(!t(n.PO,"PONO",a)){let e={PONO:o.CustomerPONumber,Customer:o.customer,Style:o.StyleNumber,Qty:o.Qty,Product:o.product,Color:{}},t=JSON.parse('{"'+l+'": {"'+s+'":"'+i+'"}}');e.Color=t,n.PO.push(e)}}else{let e={PONO:o.CustomerPONumber,Customer:o.customer,Style:o.StyleNumber,Qty:o.Qty,Product:o.product,Color:{}},t=JSON.parse('{"'+l+'": {"'+s+'":"'+i+'"}}');e.Color=t,n.PO.push(e)}});var a=n.PO.length;Swal.fire({title:a+" Purchase Orders detected, Ready to finish adding?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, add as New Purchase Orders!"}).then(e=>{e.value?o(n.PO,0).done(function(){Swal.fire("Added Successfully!","This page will be refreshed.","success").then(()=>{window.location.reload()})}):window.location.reload()})},l.readAsText(r.target.files.item(0))}})}(jQuery),function(e){e("#addWF").on("click",function(t){Swal.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0}).queue(["Enter Shrinkage"]).then(t=>{if(t.value){e(":button").prop("disabled",!0);let o=t.value;if(null!=o)try{o.forEach(t=>{if(!e.isNumeric(t))throw new Error("Invalid Value: "+t)});let t=new FormData;t.append("poid",e("#poid").val()),t.append("s",o[0]),e.ajax({type:"post",url:"/addWF",data:t,processData:!1,contentType:!1,success:function(t){e(":button").prop("disabled",!1),Swal.fire({type:"success",title:"Waterfall No: "+t+" is created.",html:'<form action="/buildWF" method="post"><input type="hidden" name="id" value="'+t+'"><button class="btn btn-success" type="submit" ><i class="mdi mdi-shopping mr-2 text-white  font-18 vertical-middle"></i>Add Sequence</button ></form >',confirmButtonText:"Skip"}).then(()=>{})},error:function(t,o,r){e(":button").prop("disabled",!1),Swal.fire({type:"error",title:"Oops...",html:"<pre><code> Something went wrong! "+t.responseText+"</code></pre>"})}})}catch(t){e(":button").prop("disabled",!1),Swal.fire({type:"error",title:"Oops...",text:"Something went wrong! "+t})}}}),e(":button").prop("disabled",!1)})}(jQuery),function(e){function t(o){text=o,Swal.mixin({input:"text",confirmButtonText:"Next &rarr;",text:text,showCancelButton:!0}).queue(["Enter/ Scan Roll No"]).then(o=>{if(o.value){e(":button").prop("disabled",!0);let r=o.value;if(null!=r)try{let o=new FormData;o.append("wfid",e("#wfid").val()),o.append("roid",r[0]),e.ajax({type:"post",url:"/addRollWF",data:o,processData:!1,contentType:!1,success:function(o){e(":button").prop("disabled",!1),t(o)},error:function(t,o,r){e(":button").prop("disabled",!1),Swal.fire({type:"error",title:"Oops...",html:"<pre><code> Something went wrong! "+t.responseText+"</code></pre>"})}})}catch(t){e(":button").prop("disabled",!1),Swal.fire({type:"error",title:"Oops...",text:"Something went wrong! "+t})}}}),e(":button").prop("disabled",!1)}e("#addRollWF").on("click",function(e){t("Scan Ready")})}(jQuery);